<!DOCTYPE html>
<html>
  <head>
    <title>API Debug Test</title>
  </head>
  <body>
    <h1>API Debug Test</h1>
    <button onclick="testAPI()">Test Video Info API</button>
    <div id="result"></div>
    <div id="error"></div>

    <script>
      async function testAPI() {
        const resultDiv = document.getElementById("result");
        const errorDiv = document.getElementById("error");

        try {
          console.log(
            "Making API call to:",
            "https://tubesoundboard-production.up.railway.app/video-info"
          );

          const response = await fetch(
            "https://tubesoundboard-production.up.railway.app/video-info",
            {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                youtube_url: "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
              }),
            }
          );

          console.log("Response status:", response.status);
          console.log("Response headers:", [...response.headers.entries()]);

          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }

          const data = await response.json();
          console.log("Response data:", data);
          resultDiv.innerHTML =
            "<pre>" + JSON.stringify(data, null, 2) + "</pre>";
          errorDiv.innerHTML = "";
        } catch (error) {
          console.error("Error:", error);
          errorDiv.innerHTML = "Error: " + error.message;
          resultDiv.innerHTML = "";
        }
      }
    </script>
  </body>
</html>
